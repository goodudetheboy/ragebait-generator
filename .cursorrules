# Ragebait Generator - Cursor Rules

## Project Context
This is a Next.js application that generates ragebait videos using:
- Grok AI (LLM for script generation)
- Grok Vision (image analysis for uploaded images)
- ElevenLabs (TTS voice generation with personality voices)
- Pexels (images) OR user-uploaded images
- FFmpeg (video composition)

## Key Files
- `app/api/generate/route.ts` - Main video generation endpoint
- `lib/grok.ts` - Grok AI integration
- `lib/pexels.ts` - Image search
- `lib/video.ts` - FFmpeg video compositor
- `app/page.tsx` - Frontend UI

## Development Guidelines
1. Always validate environment variables before using APIs
2. Clean up temp files after video generation
3. Use TypeScript strict mode
4. Follow Next.js 15 App Router conventions
5. Videos are 9:16 vertical format (1080x1920)
6. Target 20-second duration
7. Password protection in backend, not client-side

## API Endpoints
- POST `/api/generate` - Generate video (requires password in body)

## Environment Variables
- GROK_API_KEY - xAI Grok API key
- ELEVENLABS_API_KEY - ElevenLabs TTS API key
- PEXELS_API_KEY - Pexels image API key
- ADMIN_PASSWORD - Password for authentication

## Common Tasks
### Add new TTS voice personality
Edit `app/page.tsx` voice selector dropdown
Available: UNHINGED & EMOTIONAL, CONDESCENDING & SEDUCTIVE, ALPHA MALE ENERGY, 
VALLEY GIRL ENERGY, ASMR WHISPER CREEP, SMUG KNOW-IT-ALL, 
DEEP VOICE MANSPLAINER, BRITISH KAREN

### Use uploaded images
Users can upload 1-3 images which are:
- Analyzed by Grok Vision to generate ragebait
- Used in the video instead of Pexels search
- Supports images only, prompt only, or both

### Change video duration
Edit `lib/grok.ts` system prompt

### Modify caption style
Edit `lib/video.ts` drawtext filter parameters

### Add fallback image
Add placeholder image handling in `lib/pexels.ts`

